angular.module("DeepDev.controllers").controller("AccountCtrl",["$scope","$rootScope","$http","$window","$location","$timeout","server","local",function(n,t,i,r,u,f,e,o){var a,l;n.user={Name:"",Email:"",Password:""};n.message="";t.hide=!1;t.title="Account";n.$on("$viewContentLoaded",function(){t.data=null;o.initialize(null,n,l);n.user={Name:t.userName,Email:t.userEmail,Password:"",Id:t.userId,Organization:t.tokenOrganization}});a=function(){o.logout();u.path()=="/login"||u.path()=="/logout"||u.path()=="/signup"||(t.returnTo=u.path(),u.path("/login"))};l=function(){n.user={Name:t.userName,Email:t.userEmail,Password:"",Id:t.userId,Organization:t.tokenOrganization}};n.executeLogin=function(){n.loading=!0;e.login(n.user,h,s)};n.executeSignup=function(){n.loading=!0;n.user.Id=-1;e.signup(n.user,v,s)};n.executeUpdate=function(i){n.loading=!0;e.updateUser({Name:i.Name,Email:i.Email,Password:"",Id:t.userId,Organization:i.Organization},h,s)};n.executeLogout=function(){token=o.getToken();n.loading=!0;e.logout(token,y,p)};n.executeReset=function(){n.loading=!0;e.resetPassword(n.user.Email,function(){u.path("/set-new-password")},s)};n.executeSetNewPassword=function(){n.loading=!0;e.newPassword(n.user,h,s)};var v=function(n){h(n)},h=function(t){c("Login success",!1);o.setCurrentUser(t);n.message="Welcome "+t.UserName},s=function(n){c(n.Text,!0)},y=function(){c("Logged out",!0);o.clearLocalUser();u.path("/home")},p=function(){c("Error: failed to logout",!0)},c=function(t,i){n.loading=!1;n.message=t;i?o.logout():w()},w=function(){t.returnTo?f(function(){u.path(t.returnTo)},100):f(function(){u.path("/")},100)}}]);
/*
//# sourceMappingURL=AccountCtrl.min.js.map
*/