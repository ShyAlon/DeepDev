angular.module("DeepDev.services").service("local",["$http","$q","$rootScope","$location","$window","server","$translate","$timeout","$document",function(n,t,i,r,u,f,e,o,s){var h=function(){return u.localStorage},tt=function(){i.tokenId=h().getItem("token:Id");i.tokenId?(i.tokenText=h().getItem("token:Text"),i.tokenOrganization=h().getItem("token:Organization"),i.tokenCreation=h().getItem("token:Creation"),i.tokenExpiration=h().getItem("token:Expiration"),i.userId=h().getItem("token:UserId"),i.userName=h().getItem("token:UserName"),i.userEmail=h().getItem("token:UserEmail")):console.log("failed setting user - no token id");i.loginTime=new Date},ft=function(n){var t,i;for(t in n)i=n[t],h().setItem("token:"+t,i)},et=function(){console.log("clearing user");i.tokenText=null;h().removeItem("token:Text");i.tokenCreation=null;h().removeItem("token:Creation");i.tokenOrganization=null;h().removeItem("token:Organization");i.tokenExpiration=null;h().removeItem("token:Expiration");i.userId=null;h().removeItem("token:UserId");i.userName=null;h().removeItem("token:UserName");i.userEmail=null;h().removeItem("token:UserEmail");i.tree=!1;i.wizardItem=!1;i.data=!1;i.loginTime=!1},vt=function(){if(i.tokenId||tt(),i.tokenId){var n=new Date,t=new Date(i.tokenExpiration),r=t<n;return!r}return console.log("failed validating token - no token id"),!1},yi=function(n){return{Name:"Dummy "+n,Description:"Dummey "+n+" description",Id:-1}},it=function(n,t){i[t]=n},yt=function(n){i.collections=n},w=function(n){console.log("Failed to get collection ");console.log(n)},b=function(n){var t="";t=n.Entity.ParentId>-1?n.Entity.Id<0?"/Edit/:"+n.Type+"/:"+n.Entity.ParentId:"/Edit/:"+n.Type+"/:"+n.Entity.ParentId+"/:"+n.Entity.Id:"/Edit/:"+n.Type+"/:"+n.Entity.ParentId+"/:"+n.Entity.Id;r.path(t)},pt=function(n){d();f.getXForY(n.substr(0,n.length-1),i.data.Type,{id:i.wizardItem.Id},function(n){i.gotChild?i.gotChild(n):l(function(){b(n)})},function(){console.log("Failed to get "+n.substr(0,n.length-1))})},rt=function(){if(i.data){var n=y(i.data);n&&(i.wizardItem?(n.name=i.wizardItem.Name,n.index=g(i.wizardItem.Index)):n.name=i.data.Entity.Name,v(n))}},ot=function(n){var t;return t=n.Status=="Complete"||n.RiskStatus=="Resolved"?{text:"Complete",shy:"label-success",color:"green"}:n.RiskType=="None"?{text:n.Status,shy:"label-success",color:"green"}:n.RiskType=="High"?{text:n.Status,shy:"label-danger",color:"red"}:{text:n.Status,shy:"label-warning",color:"orange"},t.effortColor=n.Effort>n.EffortEstimation?"red":n.Effort>n.EffortEstimation*.7?"orange":"green",t},d=function(n){i.wizardItem.Id>0?f.updateEntity(i.wizardItem,function(n){i.wizardItem=n;i.wizardItem.IndexString=g(i.wizardItem.Index);i.unit&&(i.wizardItem.ContainerID=i.unit.id,i.wizardItem.ContainerEntityType=i.unit.isMilestone?"Milestone":"Sprint");rt()},null,i.data.Type):f.commitEntity(i.wizardItem,function(t,r){i.canEdit=t.CanEdit;i.wizardItem=t.Entity;i.parent=t.Parent;i.data=t;l(function(){n&&n(t,r);rt()})},null,i.data.Type)},wt=function(n){console.log(i.wizardItem);n||(n=function(n){i.tree=null;r.path("/Edit/:"+n.Type.toLowerCase()+"/:"+n.Entity.ParentId+"/:"+n.Entity.Id)});var t={id:-1,ParentId:i.wizardItem.Id};f.getEntity(t,n,null,i.data.Type)},bt=function(n){return n=="Complete"},kt=function(n){return n=="Rejected"||n=="WontFix"},dt=function(n,t,i,r){var u=n.item,e=null,f;if(r)for(f=0;f<r.length;f++)if(!u[r[f]]){e=r[f];break}return u.Entity.Id<0?{text:"Not saved",shy:"label-important"}:e?{text:"Missing "+e,shy:"label-important"}:t&&(!u[t]||u[t].length==0)?{text:"No "+i+"s",shy:"label-important"}:u.Entity.Status&&bt(u.Entity.Status.toString())?{text:u.Entity.Status,shy:"label-success",color:"green"}:u.Entity.Status&&kt(u.Entity.Status.toString())?{text:u.Entity.Status,shy:"label-important"}:u.Entity.Status?{text:u.Entity.Status,shy:"label-warning"}:{text:"In process",shy:"label-warning"}},ut=function(n){var t=n.item;f.deleteEntity(t.Entity,function(){t.Entity.ParentId>0?f.getEntity({id:t.Entity.ParentId},gt,null,t.ParentType):r.path("/")},function(){},t.Type)},gt=function(n,t){i.refreshItem(n,t);l()},ni=function(){f.getEntity({},ti,null,"collections")},ti=function(n){for(var t in n)n.hasOwnProperty(t)&&(i[t]=n[t])},ii=function(){var n=y(i.data);n&&v(n)},l=function(n){f.getEntity({},function(t){ri(t);n&&n();ii()},ei,"topLevel")},ri=function(n){var t=ui(n);i.tree=t},ui=function(n){for(var t,r=[],i=0;i<n.length;i++)t={name:n[i].Entity.Item.Name,collapsed:!1,id:n[i].Entity.Item.Id,type:"Project",isProject:!0},t.nodes=st(n[i].Entity.Children,t),t.target="/Edit/:project/:"+n[i].Entity.Item.ParentId+"/:"+n[i].Entity.Item.Id,t.hasChildren=t.nodes&&t.nodes.length>0,r.push(t);return r},st=function(n,t){var u=[],r,i;for(r in n)n.hasOwnProperty(r)&&r.toLowerCase().indexOf("method")==-1&&(i={name:r,collapsed:!0,parent:t,id:-1},i.nodes=fi(n[r],r,i),i.hasChildren=i.nodes&&i.nodes.length>0,u.push(i));return u},v=function(n){if(n.collapsed=!1,n.parent)v(n.parent);else if(i.tree)for(var t=0;t<i.tree.length;t++)n.id!=i.tree[t].id&&(i.tree[t].collapsed=!0)},y=function(n,t){var r,u;if(!t){for(r=0;r<i.tree.length;r++)if(u=y(n,i.tree[r]),u)return u;return}if(n.Entity.Id==t.id&&t.type==n.Type)return t;if(t.nodes)for(r=0;r<t.nodes.length;r++)if(u=y(n,t.nodes[r]),u)return u},g=function(n){var t,i;if(!n||n.length==0)return"";for(t=n[0],i=1;i<n.length;i++)t=t+".",t=t+n[i];return t},fi=function(n,t,r){var o=[],e,u,f;for(t=t.substring(0,t.length-1),t.indexOf("Sub")==0&&(t=t.substring(4,t.length)),r||console.log(n),u=0;u<n.length;u++)f={name:n[u].Item.Name,collapsed:!0,parent:r,id:n[u].Item.Id,type:t.substring(0,t.length),target:"/Edit/:"+t+"/:"+n[u].Item.ParentId+"/:"+n[u].Item.Id,index:g(n[u].Item.Index)},f.nodes=st(n[u].Children,f),f.hasChildren=f.nodes&&f.nodes.length>0,i.wizardItem&&n[u].Item.Id==i.wizardItem.Id&&n[u].Item.Name==i.wizardItem.Name&&n[u].Item.ParentId==i.wizardItem.ParentId&&(e=f),o.push(f);return e&&v(e),o},ei=function(n){console.log("Failed to get tree in  "+r.path());console.log(n)},oi=function(){i.wizardItem.ParentId>-1?r.path("/"+i.data.Type.toLowerCase()+"Wizard/:"+i.wizardItem.ParentId+"/:"+i.wizardItem.Id):r.path("/"+i.data.Type.toLowerCase()+"Wizard/:"+i.wizardItem.Id)},ht=function(n){d();var t=i.wizardItem;f.getXForY(n,"Item",{id:-1,parentId:i.wizardItem.Id,parentType:i.data.Type},function(t){r.path("/Edit/:"+n+"/:"+t.Parent.Id+"/:"+t.Entity.Id)},function(t){console.log("Failed to get new "+n);console.log(t)})},si=function(n,t,r,u){var e,f;if(i[r]==null){console.log("no item to add");return}for(console.log(i[r]),n[t].push(i[r].Entity.Id),e=-1,f=0;f<i[u].length;f++)if(i[u][f].Entity.Id==i[r].Entity.Id){e=f;break}e>-1?(i[u].splice(e,1),i[r]=i[u].length>0?i[u][0]:null):console.log("failed to remove method")},p=function(n,t,r){var f,u;if(i.collections[t]){if(n[r])if(1){for(u=0;u<i.collections[t].length;u++)for(f=0;f<n[r].length;f++)if(console.log(n[r][f]),console.log(i.collections[t][u]),i.collections[t][u].Id==n[r][f].Id){console.log("Assign "+i.collections[t][u].Name+" to "+n[r][f].Name);n[r][f]=i.collections[t][u];break}}else for(console.log(n[projectCollection][r]),u=0;u<i.collections[t].length;u++)if(i.collections[t][u].Id==n[r].Id){console.log("Assign "+i.collections[t][u].Name+" to "+n[projectCollection][r].Name);n[r]=i.collections[t][u];break}}else console.log("Failed to find "+t)},hi=function(n){var t,u,r;for(i.availableFrameworks=[],t=0;t<n.length;t++){for(u=!1,r=0;r<i.project.DevelopmentInfrastructureIds.length;r++)u|=i.project.DevelopmentInfrastructureIds[r]==n[t].Id;u?console.log("Not adding "+n[t].Name):i.availableFrameworks.push(n[t])}},ct=function(n,t,r){i.wizardItem.Id>0?f.updateEntity(i.wizardItem,n,t,r):f.commitEntity(i.wizardItem,n,t,r)},lt=function(n){return str=n.Entity.Name.replace(/ /g,""),str+="("+(n.Entity.Parameters||"")+")",n.Entity.CallMode!="InProcess"&&(str+=";;"+n.Entity.CallMode),str=(n.Entity.Return||"void")+" "+str},c=function(n){return n.Module+";;"+n.Parent.Name},at=function(n){var t=[];document.querySelector("#leftbar-wrapper")&&t.push({element:"#leftbar-wrapper",intro:e.instant("navigationBlock"),position:"auto"});document.querySelector("#rightbar-audit")&&t.push({element:"#rightbar-audit",intro:e.instant("auditTrail"),position:"auto"});document.querySelector("#rightbar-session")&&t.push({element:"#rightbar-session",intro:e.instant("sessionTrail"),position:"auto"});document.querySelector("#userEMail")&&t.push({element:"#userEMail",intro:e.instant("userEMail"),position:"auto"});document.querySelector("#userToken")&&t.push({element:"#userToken",intro:e.instant("userToken"),position:"auto"});document.querySelector("#userPassword")&&t.push({element:"#userPassword",intro:e.instant("userPassword"),position:"auto"});document.querySelector("#userOrganization")&&t.push({element:"#userOrganization",intro:e.instant("userOrganization"),position:"auto"});document.querySelector("#userName")&&t.push({element:"#userName",intro:e.instant("userName"),position:"auto"});ai(t);i.data&&(i.data.Type!="Task"&&t.push({element:"#taskButton",intro:e.instant("taskButton",{data:i.data}),position:"auto"}),i.data.Type!="Note"&&t.push({element:"#noteButton",intro:e.instant("noteButton",{data:i.data}),position:"auto"}),t.push({element:"#saveButton",intro:e.instant("saveButton",{data:i.data}),position:"auto"},{element:"#duplicateButton",intro:e.instant("duplicateButton",{data:i.data}),position:"auto"},{element:"#deleteButton",intro:e.instant("deleteButton",{data:i.data}),position:"auto"}));vi(t);ci(t);li(t);n.ngIntroOptions={steps:t,showStepNumbers:!1,exitOnOverlayClick:!0,exitOnEsc:!0,nextLabel:"<strong>NEXT!<\/strong>",prevLabel:'<span style="color:green">Previous<\/span>',skipLabel:"Exit",doneLabel:"Thanks"}},nt=function(n,t,i){var r,f,u,e;for(result=[],r=0;r<t.length;r++){for(f=!n,u=0;u<i.length;u++)if(e=t[r].Entity?t[r].Entity.Id:t[r].Id,e==i[u]){f=n;break}f&&result.push(t[r])}return result},ci=function(n){i.data&&(a("Module",n,"method"),a("Component",n,"method"),a("Method",n,"method"),a("ProjectUser",n,"item"))},li=function(n){i.data&&(a("AddMethod",n,"sequence"),a("AddReturn",n,"sequence"),a("AddNoReturn",n,"sequence"))},a=function(n,t,r){document.querySelector("#item"+n)&&t.push({element:"#item"+n,intro:e.instant(r+n,{data:i.data})})},ai=function(n){var t,r;if(i.data){n.push({element:"#entityHeader",intro:e.instant(i.data.Type+"Description"),position:"auto"});for(t in i.data.Children)i.data.Children.hasOwnProperty(t)&&document.querySelector("#add"+t)&&(r=t.charAt(0).toUpperCase()+t.substr(1).replace(/([a-z])([A-Z])/g,"$1 $2").slice(0,-1).toLowerCase(),n.push({element:"#add"+t,intro:e.instant("childButton",{data:i.data,property:r})}))}},vi=function(n){if(i.wizardItem)for(var t in i.wizardItem)i.wizardItem.hasOwnProperty(t)&&document.querySelector("#item"+t)&&n.push({element:"#item"+t,intro:e.instant("item"+t,{data:i.data,property:t})})};return i.keys=function(n){var t=[];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(i);return t},i.keySum=function(n){var t=0;for(k in n)Object.prototype.hasOwnProperty.call(n,k)&&(t+=n[k]);return t},{getCurrentUser:function(n,t){if(vt())n();else{var i={Email:h().getItem("uibuilditUsername"),Password:h().getItem("uibuilditPassword")};i.Email&&i.Password?f.login(i,function(t){ft(t);tt();n(t)},t):t()}},setCurrentUser:function(n){ft(n);tt()},logout:function(){et()},getToken:function(){return{Id:i.tokenId,Text:i.tokenText,UserId:i.userId,UserName:i.userName,UserEmail:i.userEmail}},clearLocalUser:function(){h().removeItem("uibuilditUsername");h().removeItem("uibuilditPassword")},getTargetOSCollection:function(){f.getCollection("TargetOS",it,w,"targetOSCollection")},getHostingServerCollection:function(){f.getCollection("HostingServer",it,w,"hostingServerCollection")},getPersistenceLayerCollection:function(){f.getCollection("PersistenceLayer",it,w,"persistenceLayerCollection")},loadCollections:function(n){if(i.collections){n();return}f.getCollections(function(t,i){yt(t,i);n(t,i)},function(){console.log("failed to get collection. Logging out.");et()})},getFrameworksForOS:function(n,t){i.project&&f.getCollection("Framework",function(n,r){i.project?(hi(n),t&&t(n,r)):console.log("Got collections when no project exists")},w,"frameworkCollection",{type:"targetOs",id:n.Id})},gotProject:function(n){p(n,"TargetOSs","TargetOS");p(n,"HostingServers","HostingServer");p(n,"PersistenceLayers","PersistenceLayer");p(n,"Methods","DevelopmentMethodIds",!0);p(n,"Languages","DevelopmentLanguage")},addCollectionItem:function(n,t,i,r){si(n,t,i,r)},complexities:[{name:"Simple",id:0},{name:"Integrated",id:1},{name:"Enterprise",id:2}],projectStatus:[{text:"No Milstones",id:0},{text:"Ready",id:1},],currentSomething:function(n,t){var u=[],r,i;for(n=n||[],t=t||[],r=0;r<n.length;r++)for(i=0;i<t.length;i++)t[i].Entity&&t[i].Entity.Id==n[r]?t[i]&&u.push(t[i]):t[i].Id==n[r]&&t[i]&&u.push(t[i]);return u},currentNotSomething:function(n,t){var f=[],i,u,r;for(n=n||[],i=0;i<t.length;i++){for(u=!1,r=0;r<n.length;r++)if(t[i].Id==n[r]){u=!0;break}u||t[i]&&f.push(t[i])}return f},editChildImpl:function(n){b(n)},goToParent:function(){r.path(i.backPage.substring(1))},saveEntity:function(n,t,i){ct(n,t,i)},saveEntityAndCreate:function(n,t,r,u){ct(function(){f.getXForY(n,t,{id:i.wizardItem.Id},function(n){console.log(n);r?b(n):u(n)},function(){console.log("Failed to get dummy usecase")})},null,t)},getSequenceStatus:function(n){for(var t=0;t<n.Methods.length;t++)if(n.Methods[t].Entity.RiskStatus=="Terminal")return{text:"Terminal Risk",shy:"label-important",color:"red"};return result=n.Entity.Status=="PendingApproval"?{text:"Pending Approval",shy:"label-warning",color:"orange"}:n.Entity.Status=="Done"?{text:"Done",shy:"label-success",color:"green"}:{text:"In process",shy:"label-warning",color:"orange"}},getTaskStatus:function(n){return ot(n)},getIssueStatus:function(n){var t=n;return result=t.Status=="New"||t.Status=="Rejected"||t.Status=="WontFix"?{text:"Pending Approval",shy:"label-warning",color:"red"}:t.Status=="Complete"?{text:"Complete",shy:"label-success",color:"green"}:{text:"In process",shy:"label-important",color:"orange"},result.effortColor=t.Effort>t.EffortEstimation?"red":t.Effort>t.EffortEstimation*.7?"orange":"green",result},updateSequence:function(n){var i=[],r,t,f,u,e,o;if(n.Entity.Initiator=n.Entity.Initiator||"Initiator",n.Entity.Initiator&&n.Methods&&n.Methods.length>0)for(n.Entity.definition=n.Entity.Initiator,r=0;r<n.Methods.length;r++)t=n.Methods[r],t.Entity.Id<0?t.Entity.Id%2==-1?i.length>0&&(f=i.pop(),u=n.Entity.Initiator,i.length>0&&(u=c(i[i.length-1])),n.Entity.definition+="-->"+u+": "+f.Entity.Return+"\n",t.comment&&(n.Entity.definition+="note over "+c(f)+": "+t.comment+"\n"),r+1<n.Methods.length&&(n.Entity.definition+=u)):t.Entity.Id%2==0&&i.length>0&&(f=i.pop(),u=n.Entity.Initiator,i.length>0&&(u=c(i[i.length-1])),t.comment&&(n.Entity.definition+="\nnote over "+c(f)+": "+t.comment+"\n"),e=n.Entity.definition.lastIndexOf("\n"),e>-1&&(n.Entity.definition=n.Entity.definition.substr(0,e+1),n.Entity.definition+=u)):(o="->",t.Entity.ReturnMode=="ASync"&&(o="-->"),n.Entity.definition+=o+c(t)+": "+lt(t)+"\n",i.push(t),t.comment?n.Entity.definition+="note over "+c(t)+": "+t.comment+"\n":t.Entity.Description&&t.Entity.Description.substr(0,14)!="new method for"&&(n.Entity.definition+="note over "+c(t)+": "+t.Entity.Description+"\n"),r+1<n.Methods.length&&(n.Entity.definition+=c(n.Methods[r])));else n.Entity.definition=""},getMethodStatus:function(n){return n.RiskType=="No"||n.RiskStatus=="Resolved"?{text:"No Risk",shy:"label-success",color:"green"}:n.RiskStatus=="Terminal"?{text:"Terminal Risk",shy:"label-important",color:"red"}:{text:"Pending",shy:"label-warning",color:"orange"}},clearData:function(){i.moduleName=null;i.wizardItem=null;i.data=null;i.componentName=null;i.methodName=null;i.parent=null;i.canEdit=!1},methodText:function(n){return lt(n)},refreshTree:function(n){l(n)},initialize:function(n,t,u,h){var a,p,w,k,c,tt;if(i.backButton=null,i.backPage=null,i.searchResults=null,n){if(i.canEdit=n.CanEdit,i.wizardItem=n.Entity,i.parent=n.Parent,i.data=n,n.Parent&&(i.backButton=n.Parent.Name,i.backPage="#/Edit/:"+n.ParentType.toLowerCase()+"/:"+n.Parent.ParentId+"/:"+n.Parent.Id),n.Children)for(a in n.Children)if(n.Children.hasOwnProperty(a))for(c=0;c<n.Children[a].length;c++)n.Children[a][c].parentType=n.Type,n.Children[a][c].parent=n.Entity;i.addTag=function(n){for(var r,t=0;t<i.data.Metadata.Tags.length;t++)if(r=i.data.Metadata.Tags[t],n.Name==r.Name&&r.Deleted){r.Deleted=!1;return}i.data.Metadata.Tags.push({Name:n,Id:-1,ProjectId:i.wizardItem.ProjectId,EntityId:i.wizardItem.Id,EntityType:i.data.Type})};i.removeTag=function(n){for(var r,t=0;t<i.data.Metadata.Tags.length;t++)r=i.data.Metadata.Tags[t],n==r&&(n.Deleted=!0)};i.disableNewTag=function(){var n,t;if(i.newTag){for(n=0;n<i.data.Metadata.Tags.length;n++)if(t=i.data.Metadata.Tags[n],i.newTag==t.Name&&!t.Deleted)return!0;return!1}return!0};i.saveTags=function(){for(var n,t=0;t<i.data.Metadata.Tags.length;t++)n=i.data.Metadata.Tags[t],n.Id==-1?f.commitEntity(n,function(){console.log("Saved tag "+n)},function(t){console.log("Failed to save tag "+n);console.log(t)},"TagEntity"):n.Deleted&&f.deleteEntity(n,function(){console.log("deleted "+n.Name)},function(){console.log("failed to delete "+n.Name)},"TagEntity");return!1};i.wizardItem.IndexString=g(i.wizardItem.Index)}if(i.refreshItem=u,i.gotChild=h,i.toggleNode=function(n){n.collapsed=!n.collapsed},i.createProject=function(){f.getEntity({id:-1},function(n){var t="/Edit/:"+n.Type+"/:"+n.Entity.ParentId+"/:"+n.Entity.Id;l(function(){r.path(t)})},function(){console.log("Failed to create project")},"Project")},t.editChild=b,t.getChildStatus=dt,t.getTaskStatus=ot,t.deleteChild=ut,t.createSubItem=pt,t.wizardDone=d,t.editItem=oi,t.tooltip=function(n,t,r){return r=r?r:i.data,{title:e.instant(n,{data:r,property:t,main:i.data}),checked:!1}},i.tooltip=t.tooltip,t.buttonTooltip=function(n,t){return{title:e.instant(n+"Button",{data:i.data,property:t}),checked:!1}},t.itemTooltip=function(n){return{title:e.instant("item"+n,{data:i.data,property:a}),checked:!1}},t.addTask=function(){ht("Task")},t.addNote=function(){ht("Note")},t.delete=function(){var e={item:i.data},f="/home",t=y(i.data),u,n;if(t.parent){if(t)for(u=t.parent,n=0;n<u.nodes.length;n++)if(t.id==u.nodes[n].id){u.nodes.splice(n,1);break}}else for(n=0;n<i.tree.length;n++)if(t.id==i.tree[n].id){i.tree.splice(n,1);break}i.data.Type!="Project"&&(f=r.path("/Edit/:"+i.data.ParentType.toLowerCase()+"/:"+i.data.Parent.ParentId+"/:"+i.data.Parent.Id));i.refreshItem=function(){r.path(f)};ut(e)},t.duplicate=wt,t.deleteCommonItem=function(n){n.item.ParentType=i.data.Type;n.item.Entity.ParentId=i.wizardItem.Id;ut(n)},t.getRepeat=function(n){return new Array(n-1)},p=function(n,t){for(var i=0;i<t.length;i++)if(n.Id==t[i]){t.splice(i,1);return}console.log("Failed to remove "+n.Id)},i.data&&i.data.PotentialPredecessors){if(t.unrelatedPredecessors=function(){return nt(!1,i.data.PotentialPredecessors,i.wizardItem.PredecessorIds)},t.relatedPredecessors=function(){return nt(!0,i.data.PotentialPredecessors,i.wizardItem.PredecessorIds)},selectFirstPredecessor=function(){var n=t.unrelatedPredecessors();n.length>0&&(i.newPredecessor=n[0])},i.data.PotentialPredecessors.length>0)for(t.newPredecessor=i.data.PotentialPredecessors[0],c=0;c<i.data.PotentialPredecessors.length;c++)i.data.PotentialPredecessors[c].Entity.link="#/Edit/:"+i.data.Type+"/:"+i.data.PotentialPredecessors[c].Entity.ParentId+"/:"+n.PotentialPredecessors[c].Entity.Id;selectFirstPredecessor();t.removePredecessor=function(n){p(n,i.data.Entity.PredecessorIds);selectFirstPredecessor()};t.addPredecessor=function(){i.wizardItem.PredecessorIds.push(i.newPredecessor.Entity.Id);selectFirstPredecessor()}}if(i.data&&i.data.AvailableRequirements){if(t.unrelatedRequirements=function(){return nt(!1,i.data.AvailableRequirements,i.wizardItem.RequirementIds)},t.relatedRequirements=function(){return nt(!0,i.data.AvailableRequirements,i.wizardItem.RequirementIds)},w=function(){var n=t.unrelatedRequirements();n.length>0&&(i.newRequirement=n[0])},k=t.unrelatedRequirements(),k.length>0)for(i.newRequirement=k[0],c=0;c<i.data.AvailableRequirements.length;c++)i.data.AvailableRequirements[c].link="#/Edit/:requirement/:"+i.wizardItem.ParentId+"/:"+i.data.AvailableRequirements[c].Id;t.addRequirement=function(){i.wizardItem.RequirementIds.push(i.newRequirement.Id);w()};t.removeRequirement=function(n){p(n,i.data.Entity.RequirementIds);w()}}i.treeClick=function(n){v(n);r.path(n.target)};tt=function(n){n.keyCode==83&&(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?(n.preventDefault(),t.save?t.save():d()):n.keyCode==76&&(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)||n.keyCode==113?(n.preventDefault(),angular.element("#docuementAttributesModal").modal("show")):n.keyCode==13||n.keyCode==112&&(n.preventDefault(),at(t),t.startTour(),console.log("starting tour"))};s.off("keydown");s.on("keydown",tt);t.ngIntroAutostart=function(){return!1};t.ngIntroAutorefresh=!0;i.tokenId&&(i.tree?rt():l(),i.CallTypes||ni());t.tooltipDelay={show:1e3,hide:200};i.data&&o(function(){at(t)},1e3)},refreshTree:function(n){l(n)}}}]).service("Sample",["$http","$q","$rootScope","$location","$window","server","$translate","$timeout","$document",function(){return{getSampleData:function(){return[{name:"Milestones",height:"3em",sortable:!1,classes:"gantt-row-milestone",color:"#45607D",tasks:[{name:"Kickoff",color:"#93C47D",from:"2013-10-07T09:00:00",to:"2013-10-07T10:00:00",data:"Can contain any custom data or object"},{name:"Concept approval",color:"#93C47D",from:new Date(2013,9,18,18,0,0),to:new Date(2013,9,18,18,0,0),est:new Date(2013,9,16,7,0,0),lct:new Date(2013,9,19,0,0,0)},{name:"Development finished",color:"#93C47D",from:new Date(2013,10,15,18,0,0),to:new Date(2013,10,15,18,0,0)},{name:"Shop is running",color:"#93C47D",from:new Date(2013,10,22,12,0,0),to:new Date(2013,10,22,12,0,0)},{name:"Go-live",color:"#93C47D",from:new Date(2013,10,29,16,0,0),to:new Date(2013,10,29,16,0,0)}],data:"Can contain any custom data or object"},{name:"Status meetings",tasks:[{name:"Demo #1",color:"#9FC5F8",from:new Date(2013,9,25,15,0,0),to:new Date(2013,9,25,18,30,0)},{name:"Demo #2",color:"#9FC5F8",from:new Date(2013,10,1,15,0,0),to:new Date(2013,10,1,18,0,0)},{name:"Demo #3",color:"#9FC5F8",from:new Date(2013,10,8,15,0,0),to:new Date(2013,10,8,18,0,0)},{name:"Demo #4",color:"#9FC5F8",from:new Date(2013,10,15,15,0,0),to:new Date(2013,10,15,18,0,0)},{name:"Demo #5",color:"#9FC5F8",from:new Date(2013,10,24,9,0,0),to:new Date(2013,10,24,10,0,0)}]},{name:"Kickoff",movable:{allowResizing:!1},tasks:[{name:"Day 1",color:"#9FC5F8",from:new Date(2013,9,7,9,0,0),to:new Date(2013,9,7,17,0,0),progress:{percent:100,color:"#3C8CF8"},movable:!1},{name:"Day 2",color:"#9FC5F8",from:new Date(2013,9,8,9,0,0),to:new Date(2013,9,8,17,0,0),progress:{percent:100,color:"#3C8CF8"}},{name:"Day 3",color:"#9FC5F8",from:new Date(2013,9,9,8,30,0),to:new Date(2013,9,9,12,0,0),progress:{percent:100,color:"#3C8CF8"}}]},{name:"Create concept",tasks:[{name:"Create concept",content:'<i class="fa fa-cog" ng-click="scope.handleTaskIconClick(task.model)"><\/i> {{task.model.name}}',color:"#F1C232",from:new Date(2013,9,10,8,0,0),to:new Date(2013,9,16,18,0,0),est:new Date(2013,9,8,8,0,0),lct:new Date(2013,9,18,20,0,0),progress:100}]},{name:"Finalize concept",tasks:[{name:"Finalize concept",color:"#F1C232",from:new Date(2013,9,17,8,0,0),to:new Date(2013,9,18,18,0,0),progress:100}]},{name:"Development",children:["Sprint 1","Sprint 2","Sprint 3","Sprint 4"],content:'<i class="fa fa-file-code-o" ng-click="scope.handleRowIconClick(row.model)"><\/i> {{row.model.name}}'},{name:"Sprint 1",tooltips:!1,tasks:[{name:"Product list view",color:"#F1C232",from:new Date(2013,9,21,8,0,0),to:new Date(2013,9,25,15,0,0),progress:25}]},{name:"Sprint 2",tasks:[{name:"Order basket",color:"#F1C232",from:new Date(2013,9,28,8,0,0),to:new Date(2013,10,1,15,0,0)}]},{name:"Sprint 3",tasks:[{name:"Checkout",color:"#F1C232",from:new Date(2013,10,4,8,0,0),to:new Date(2013,10,8,15,0,0)}]},{name:"Sprint 4",tasks:[{name:"Login & Signup & Admin Views",color:"#F1C232",from:new Date(2013,10,11,8,0,0),to:new Date(2013,10,15,15,0,0)}]},{name:"Hosting"},{name:"Setup",tasks:[{name:"HW",color:"#F1C232",from:new Date(2013,10,18,8,0,0),to:new Date(2013,10,18,12,0,0)}]},{name:"Config",tasks:[{name:"SW / DNS/ Backups",color:"#F1C232",from:new Date(2013,10,18,12,0,0),to:new Date(2013,10,21,18,0,0)}]},{name:"Server",parent:"Hosting",children:["Setup","Config"]},{name:"Deployment",parent:"Hosting",tasks:[{name:"Depl. & Final testing",color:"#F1C232",from:new Date(2013,10,21,8,0,0),to:new Date(2013,10,22,12,0,0),classes:"gantt-task-deployment"}]},{name:"Workshop",tasks:[{name:"On-side education",color:"#F1C232",from:new Date(2013,10,24,9,0,0),to:new Date(2013,10,25,15,0,0)}]},{name:"Content",tasks:[{name:"Supervise content creation",color:"#F1C232",from:new Date(2013,10,26,9,0,0),to:new Date(2013,10,29,16,0,0)}]},{name:"Documentation",tasks:[{name:"Technical/User documentation",color:"#F1C232",from:new Date(2013,10,26,8,0,0),to:new Date(2013,10,28,18,0,0)}]}]},getSampleTimespans:function(){return[{from:new Date(2013,9,21,8,0,0),to:new Date(2013,9,25,15,0,0),name:"Sprint 1 Timespan"}]}}}]);
/*
//# sourceMappingURL=Local.min.js.map
*/